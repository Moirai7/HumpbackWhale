/home/xutongkun/PCB_RPP_for_reID-master/reid/models/resnet.py:47: UserWarning: nn.init.kaiming_normal is now deprecated in favor of nn.init.kaiming_normal_.
  init.kaiming_normal(self.local_conv.weight, mode= 'fan_out')
/home/xutongkun/PCB_RPP_for_reID-master/reid/models/resnet.py:50: UserWarning: nn.init.constant is now deprecated in favor of nn.init.constant_.
  init.constant(self.feat_bn2d.weight,1) #initialize BN, may not be used
/home/xutongkun/PCB_RPP_for_reID-master/reid/models/resnet.py:51: UserWarning: nn.init.constant is now deprecated in favor of nn.init.constant_.
  init.constant(self.feat_bn2d.bias,0) # iniitialize BN, may not be used
/home/xutongkun/PCB_RPP_for_reID-master/reid/models/resnet.py:55: UserWarning: nn.init.normal is now deprecated in favor of nn.init.normal_.
  init.normal(self.instance0.weight, std=0.001)
/home/xutongkun/PCB_RPP_for_reID-master/reid/models/resnet.py:56: UserWarning: nn.init.constant is now deprecated in favor of nn.init.constant_.
  init.constant(self.instance0.bias, 0)
/home/xutongkun/PCB_RPP_for_reID-master/reid/models/resnet.py:60: UserWarning: nn.init.normal is now deprecated in favor of nn.init.normal_.
  init.normal(self.instance1.weight, std=0.001)
/home/xutongkun/PCB_RPP_for_reID-master/reid/models/resnet.py:61: UserWarning: nn.init.constant is now deprecated in favor of nn.init.constant_.
  init.constant(self.instance1.bias, 0)
/home/xutongkun/PCB_RPP_for_reID-master/reid/models/resnet.py:65: UserWarning: nn.init.normal is now deprecated in favor of nn.init.normal_.
  init.normal(self.instance2.weight, std=0.001)
/home/xutongkun/PCB_RPP_for_reID-master/reid/models/resnet.py:66: UserWarning: nn.init.constant is now deprecated in favor of nn.init.constant_.
  init.constant(self.instance2.bias, 0)
/home/xutongkun/PCB_RPP_for_reID-master/reid/models/resnet.py:70: UserWarning: nn.init.normal is now deprecated in favor of nn.init.normal_.
  init.normal(self.instance3.weight, std=0.001)
/home/xutongkun/PCB_RPP_for_reID-master/reid/models/resnet.py:71: UserWarning: nn.init.constant is now deprecated in favor of nn.init.constant_.
  init.constant(self.instance3.bias, 0)
/home/xutongkun/PCB_RPP_for_reID-master/reid/models/resnet.py:75: UserWarning: nn.init.normal is now deprecated in favor of nn.init.normal_.
  init.normal(self.instance4.weight, std=0.001)
/home/xutongkun/PCB_RPP_for_reID-master/reid/models/resnet.py:76: UserWarning: nn.init.constant is now deprecated in favor of nn.init.constant_.
  init.constant(self.instance4.bias, 0)
/home/xutongkun/PCB_RPP_for_reID-master/reid/models/resnet.py:80: UserWarning: nn.init.normal is now deprecated in favor of nn.init.normal_.
  init.normal(self.instance5.weight, std=0.001)
/home/xutongkun/PCB_RPP_for_reID-master/reid/models/resnet.py:81: UserWarning: nn.init.constant is now deprecated in favor of nn.init.constant_.
  init.constant(self.instance5.bias, 0)
Market dataset loaded
  subset   | # ids | # images
  ---------------------------
  train    |   751 |    12936
  query    |   750 |     3368
  gallery  |   751 |    15913
/home/xutongkun/PCB_RPP_for_reID-master/reid/trainers_partloss.py:86: UserWarning: invalid index of a 0-dim tensor. This will be an error in PyTorch 0.5. Use tensor.item() to convert a 0-dim tensor to a Python number
  prec = prec[0]
/home/xutongkun/PCB_RPP_for_reID-master/reid/trainers_partloss.py:36: UserWarning: invalid index of a 0-dim tensor. This will be an error in PyTorch 0.5. Use tensor.item() to convert a 0-dim tensor to a Python number
  losses.update(loss.data[0], targets.size(0))
Test with best model:
=> Loaded checkpoint 'logs/market-1501/PCB/checkpoint.pth.tar'
extracting query features

/home/xutongkun/PCB_RPP_for_reID-master/reid/feature_extraction/cnn.py:12: UserWarning: volatile was removed and now has no effect. Use `with torch.no_grad():` instead.
  inputs = Variable(inputs, volatile=True)
Extract Features: [10/53]	Time 0.132 (0.236)	Data 0.000 (0.094)	
Extract Features: [20/53]	Time 0.142 (0.190)	Data 0.000 (0.047)	
Extract Features: [30/53]	Time 0.125 (0.176)	Data 0.000 (0.031)	
Extract Features: [40/53]	Time 0.128 (0.167)	Data 0.000 (0.024)	
Extract Features: [50/53]	Time 0.249 (0.164)	Data 0.000 (0.019)	
extracting gallery features

Extract Features: [10/249]	Time 0.187 (0.204)	Data 0.000 (0.051)	
Extract Features: [20/249]	Time 0.127 (0.178)	Data 0.000 (0.026)	
Extract Features: [30/249]	Time 0.173 (0.168)	Data 0.000 (0.017)	
Extract Features: [40/249]	Time 0.156 (0.163)	Data 0.000 (0.013)	
Extract Features: [50/249]	Time 0.192 (0.159)	Data 0.000 (0.010)	
Extract Features: [60/249]	Time 0.133 (0.156)	Data 0.000 (0.009)	
Extract Features: [70/249]	Time 0.161 (0.157)	Data 0.000 (0.007)	
Extract Features: [80/249]	Time 0.125 (0.155)	Data 0.000 (0.006)	
Extract Features: [90/249]	Time 0.127 (0.154)	Data 0.000 (0.006)	
Extract Features: [100/249]	Time 0.129 (0.155)	Data 0.000 (0.005)	
Extract Features: [110/249]	Time 0.244 (0.157)	Data 0.000 (0.005)	
Extract Features: [120/249]	Time 0.172 (0.158)	Data 0.000 (0.004)	
Extract Features: [130/249]	Time 0.158 (0.157)	Data 0.000 (0.004)	
Extract Features: [140/249]	Time 0.141 (0.157)	Data 0.000 (0.004)	
Extract Features: [150/249]	Time 0.275 (0.158)	Data 0.000 (0.004)	
Extract Features: [160/249]	Time 0.130 (0.158)	Data 0.000 (0.003)	
Extract Features: [170/249]	Time 0.163 (0.157)	Data 0.000 (0.003)	
Extract Features: [180/249]	Time 0.196 (0.159)	Data 0.000 (0.003)	
Extract Features: [190/249]	Time 0.150 (0.159)	Data 0.000 (0.003)	
Extract Features: [200/249]	Time 0.179 (0.159)	Data 0.000 (0.003)	
Extract Features: [210/249]	Time 0.138 (0.160)	Data 0.000 (0.003)	
Extract Features: [220/249]	Time 0.177 (0.160)	Data 0.000 (0.002)	
Extract Features: [230/249]	Time 0.157 (0.159)	Data 0.000 (0.002)	
Extract Features: [240/249]	Time 0.127 (0.159)	Data 0.000 (0.002)	
Mean AP: 78.3%
CMC Scores    allshots      cuhk03  market1501
  top-1          61.1%       80.3%       92.5%
  top-5          74.9%       93.1%       96.9%
  top-10         80.2%       95.7%       97.8%
